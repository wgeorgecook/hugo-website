<!doctype html><html lang=en><head><title>Python_none :: </title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Interpreted languages and foot guns"><meta name=keywords content="none,unintended,bug,lesson,go,compiler"><meta name=robots content="noodp"><link rel=canonical href=https://williamcook.dev/posts/python_none/><link rel=stylesheet href=https://williamcook.dev/assets/style.css><link rel=stylesheet href=https://williamcook.dev/assets/pink.css><link rel=apple-touch-icon href=https://williamcook.dev/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://williamcook.dev/img/favicon/pink.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Python_none"><meta property="og:description" content="Interpreted languages and foot guns"><meta property="og:url" content="https://williamcook.dev/posts/python_none/"><meta property="og:site_name" content><meta property="og:image" content="https://williamcook.dev/"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-07-26 20:01:56 -0700 -0700"></head><body class=pink><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>William George Cook</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/posts>Posts</a></li><li><a href=/showcase>Public Projects</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/posts>Posts</a></li><li><a href=/showcase>Public Projects</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://williamcook.dev/posts/python_none/>Python_none</a></h1><div class=post-meta><span class=post-date>2022-07-26
</span><span class=post-author>:: William Cook</span></div><span class=post-tags>#<a href=https://williamcook.dev/tags/python/>python</a>&nbsp;
#<a href=https://williamcook.dev/tags/bugs/>bugs</a>&nbsp;
#<a href=https://williamcook.dev/tags/work/>work</a>&nbsp;</span><div class=post-content><div><h1 id=pythonic-none>Pythonic None<a href=#pythonic-none class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Today at work we had a silly bug that exposes how reliant I am on Go&rsquo;s type system and compiler. I personally am too comfortable building a Docker image and assuming that the most egregious bugs were caught simply because the build was successful.</p><h2 id=the-bug>The Bug<a href=#the-bug class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Python doesn&rsquo;t require you to specify a return value. In fact, you can have a function that may not explicitly return at all. Since Python is a scripting language, it will automatically return when it hits the bottom of the function being called. When this happens without returning a specific value, any variable assigned to the function call will be <code>None</code>. A silly but illustrating example:</p><pre tabindex=0><code class="language-code=" data-lang="code=">def change_string(do_it: bool) -&gt; str: 
    if do_it:
        return &#34;changed!&#34;
</code></pre><p>This function accepts a boolean that determines whether to do anything at all. According to the type hints and the function name, a string is the expected return type. You can assign the output of this function to a variable like normal:</p><pre tabindex=0><code class="language-code=" data-lang="code=">my_string = change_string(False)
</code></pre><p>However, since the argument to <code>change_string</code> is <code>False</code>, the assignment will suffer from this bug. There is no return statement for a fasly <code>do_it</code> condition, so when Python reaches the end of the function it will have no choice but to return <code>None</code>. You can confirm the assignment by printing the value and type of <code>my_string</code>:</p><pre tabindex=0><code class="language-code=" data-lang="code=">print(my_string)
print(type(my_string))

&gt; None
&gt; &lt;class &#39;NoneType&#39;&gt;
</code></pre><h2 id=lesson-learned>Lesson Learned<a href=#lesson-learned class=hanchor arialabel=Anchor>&#8983;</a></h2><p>We switched to Go for the concurrency benefits but also the type system and compiler helps save us from these runtime errors. The same function in Go would result in a compile time error:</p><pre tabindex=0><code class="language-code=" data-lang="code=">func changeString(doIt bool) string {
        if doIt {
                return &#34;Changed!&#34;
        }
}


func main() {
        s := changeString(false)
        fmt.Println(s)

}

&gt; go run main.go
&gt; ./main.go:10:1: missing return
</code></pre><p>This Python service isn&rsquo;t a candidate for rewriting in Go any time soon. Remembering to be more thorough in my code review and testing would have saved me from an embarrassing run time error that had some client impact today.</p></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>Â© 2025 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://williamcook.dev/assets/main.js></script><script src=https://williamcook.dev/assets/prism.js></script></div></body></html>